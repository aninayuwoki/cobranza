<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Pagos - Alumnos</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div id="loader" class="spinner" style="display:none;"></div>
    <div class="container">
        <div class="header">
            <h1>üìö Control de Pagos Escolares</h1>
            <p>Sistema de seguimiento de pagos semanales - $2.00 por semana</p>
            <button class="admin-btn" onclick="showAdminModal()">‚öôÔ∏è Administrar</button>
        </div>

        <div class="content">
            <div class="stats">
                <div class="stat-card">
                    <h3 id="totalStudents">0</h3>
                    <p>Total Alumnos</p>
                </div>
                <div class="stat-card">
                    <h3 id="paidStudents">0</h3>
                    <p>Al D√≠a</p>
                </div>
                <div class="stat-card">
                    <h3 id="unpaidStudents">0</h3>
                    <p>Atrasados</p>
                </div>
                <div class="stat-card">
                    <h3 id="totalCollected">$0</h3>
                    <p>Total Recaudado</p>
                </div>
            </div>

            <div class="search-container">
                <input type="text" class="search-input" id="searchInput" placeholder="Buscar alumno por nombre...">
                <span class="search-icon">üîç</span>
            </div>

            <div id="studentList">
                </div>
        </div>
    </div>

    <div id="adminModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Panel de Administraci√≥n</h2>
                <span class="close" onclick="closeAdminModal()">&times;</span>
            </div>
            
            <div id="loginForm" class="password-form">
                <h3>Ingrese la contrase√±a de administrador</h3>
                <input type="password" id="adminPassword" class="password-input" placeholder="Contrase√±a">
                <button class="btn" onclick="login()">Ingresar</button>
                <div id="loginError" class="login-error" style="display: none;">Contrase√±a incorrecta</div>
                <p style="margin-top: 20px; color: #666; font-size: 14px;">
                   
                </p>
            </div>

            <div id="adminPanel" style="display: none;">
                <div class="admin-controls">
                    <h3>Registrar Pago</h3>
                    <div class="form-group">
                        <label>Seleccionar Alumno:</label>
                        <select id="paymentStudent">
                            <option value="">Seleccione un alumno...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Monto del Pago:</label>
                        <input type="number" id="paymentAmountInput" placeholder="2.00" step="0.01" value="2.00">
                    </div>
                    <div class="form-group">
                        <label>Fecha del Pago:</label>
                        <input type="date" id="paymentDate">
                    </div>
                    <button class="btn" onclick="registerPayment()">üíµ Registrar Pago</button>
                </div>

                <div class="admin-controls">
                    <h3>Agregar Nuevo Alumno</h3>
                    <div class="form-group">
                        <label>Nombre del Alumno:</label>
                        <input type="text" id="studentName" placeholder="Ej: Juan P√©rez">
                    </div>
                    <button class="btn" onclick="addStudent()">‚ûï Agregar Alumno</button>
                </div>

                <div class="admin-controls">
                    <h3>Alumnos Registrados</h3>
                    <div id="adminStudentsList">
                        <!-- Student list will be rendered here by JS -->
                        </div>
                </div>

                <div id="editStudentSection" class="admin-controls" style="display: none;">
                    <h3>Editar Alumno</h3>
                    <input type="hidden" id="editStudentId">
                    <div class="form-group">
                        <label for="editStudentName">Nombre:</label>
                        <input type="text" id="editStudentName">
                    </div>
                    <div class="form-group">
                        <label for="editStudentGrade">Grado/Curso:</label>
                        <input type="text" id="editStudentGrade">
                    </div>
                    <div class="form-group">
                        <label for="editStudentWeeklyAmount">Monto Semanal:</label>
                        <input type="number" id="editStudentWeeklyAmount" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="editStudentStartDate">Fecha de Inicio (YYYY-MM-DD):</label>
                        <input type="date" id="editStudentStartDate">
                    </div>
                    <button class="btn" onclick="handleUpdateStudent()">üíæ Guardar Cambios</button>
                    <button class="btn btn-secondary" onclick="cancelEditStudent()">Cancelar</button>
                </div>

                <div class="admin-controls">
                    <h3>Reportes</h3>
                    <button class="btn btn-success" onclick="exportStudentsToExcel()">üìÑ Exportar a Excel</button>
                    <!-- Placeholder for PDF export button if added later -->
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>